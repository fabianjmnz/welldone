<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=Catamaran:200&display=swap" rel="stylesheet">
<link rel='stylesheet' type='text/css' href='/account.css'/>
<link rel='stylesheet' type='text/css' href='/master.css'/>
</head>
<body>

<header class="header">
  <nav>
      <a href='/'><b>WellDone</b></a>
      <div>
        <a href='/' class="logout" style='vertical-align:sub'><i>logout</i></a>
      </div>
  </nav>
</header>

<div>
<section>
  <h1>{{userPage.name}}
    <form class="" action="/acct/editprofile" method="post">
      <span><button>Edit profile</button></span>
    </form>
  </h1>
</section>

<div class="w3-bar w3-black">
  <button class="" onclick="openTab('Profile')">Profile</button>
  <button class="" onclick="openTab('Posts')">Posts</button>
  <button class="" onclick="openTab('Claps')">Claps</button>
</div>

<div id="Profile" class="tab">
  <img src="{{Page.user_image}}" alt="">
  <h3>Name: {{Page.name}}</h3>
  <h3>email: {{Page.email}}</h3>
</div>

<div id="Posts" class="tab">
  {{#userPosts}}
  <li>
    {{#postImage}}
    <img src="{{imageURL}}">
    {{/postImage}}
    {{^postimage}}
    {{/postimage}}
    <h2>{{title}}</h2>
    {{#postswithcategories}}
    <p>{{category.category}}</p>
    {{/postswithcategories}}
    <p>{{body}}</p>
    <p>Comments: {{comment.length}}</p>
    <form action="/acct/updatePost" method="post" enctype="multipart/form-data">
      <input type="file" name="post_image" accept="image/jpeg, image/jpg, image/png">
      <input type="hidden" name="post_id" value="{{id}}">
      <input type="hidden" name="user_id" value="1">
      {{#categories}}
      <div>
        <input type="checkbox" name="categories" value="{{id}}">
        <label for="huey">{{category}}</label>
      </div>
      {{/categories}}
      <input type="text" name="title"><br>
      <textarea name="body" rows="8" cols="40"></textarea><br>
      <button>Update Post</button>
    </form>
    <form action="/acct/deletePost" method="post">
      <input type="hidden" name="post_id" value="{{id}}">
      <button>Delete Post</button>
    </form>
    <form action="/post" method="get">
      <input type="hidden" name="post_id" value="{{id}}">
      <button>Post Page</button>
    </form>
    <form action="/acct/removePostImage" method="post">
      {{#postImage}}
      <input type="hidden" name="file_path" value="{{imageURL}}">
      {{/postImage}}
      <input type="hidden" name="post_id" value="{{id}}">
      <button>Delete Image</button>
    </form>
  </li>
  {{/userPosts}}
  {{^userPosts}}
  <li>You Have No Posts</li>
  {{/userPosts}}
  </ul>
</div>

<div id="Claps" class="tab">
  <ul>
    Your Favourites
    {{#favouritePosts}}
    <li>
      <h2>{{post.title}}</h2>
      <p>Comments: {{post.comment.length}}</p>
      <form action="/post" method="post">
        <input type="hidden" name="post_id" value="{{post.id}}">
        <button>Post Page</button>
      </form>
      <form action="/acct/removeFavourite" method="post">
        <input type="hidden" name="favourite_id" value="{{id}}">
        <button>Remove Favourite</button>
      </form>
    </li>
    {{/favouritePosts}}
    {{^favouritePosts}}
    <li>You Have No Favourites</li>
    {{/favouritePosts}}
  </ul>
</div>

</div>
<script src="/tabFunction.js"></script>
</body>
{{>footer}}
</html>
