
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

  </body>
</html>

{{>head}}
{{>header}}

<div class="row d-flex">
  <div id="blog-column" class="col">

    <div>
        <section>
        {{#userPage}}
            <h1>TEST{{userPage.name}}</h1>
        {{/userPage}}
    </div>

    <div class="mt-3"> 
        <p class="write-post-textarea-name-text" id="change-pic-text">Change profile picture:</p>
        <form action="acct/user_image" method="post" enctype="multipart/form-data">
          <input class="choose-file-text" type="file" name="user_image" accept="image/jpeg, image/jpg, image/png">
          <button id="save-photo-button">Save</button>
        </form>
        <img id="profile-pic-img" src="{{userPage.user_image}}" class="text-info" alt="Profile picture">
    </div>

    <div class="d-flex py-3"></div>

    <div class="form-group">
        <h1 class="text-light" id="write-post-text">Write a post:</h1>
        <p class="write-post-textarea-name-text">Upload image:</p>
        <form action="/acct/addPost" method="post" enctype="multipart/form-data">
          <input type="hidden" name="user_id" value="1">
          <input class="choose-file-text" type="file" name="post_image" accept="image/jpeg, image/jpg, image/png">

          {{#categories}}
            <div>
                <input type="checkbox" name="categories" value="{{id}}">
                <label for="huey">{{category}}</label>
            </div>
          {{/categories}}

          <p class="write-post-textarea-name-text">Title:</p>
          <input class="comment-textbox mb-1" type="text" name="title">
          <p class="text-light write-post-textarea-name-text">Post body:</p>
          <textarea class="form-control comment-textbox" name="body" rows="8" cols="80"></textarea>
          <button id="publish-button">Publish</button>
        </form>
    </div>

    <div>
      <p class="text-light">Your posts:</p>
      {{#userPosts}}
      <div>
        {{#postImage}}
        <img src="{{imageURL}}">
        {{/postImage}}
        {{^postimage}}
        {{/postimage}}
        <h2>{{title}}</h2>
        {{#postswithcategories}}
        <p>{{category.category}}</p>
        {{/postswithcategories}}
        <p>{{body}}</p>
        <p>Comments: {{comment.length}}</p>
        <form action="/acct/updatePost" method="post" enctype="multipart/form-data">
          <input type="file" name="post_image" accept="image/jpeg, image/jpg, image/png">
          <input type="hidden" name="post_id" value="{{id}}">
          <input type="hidden" name="user_id" value="1">
          {{#categories}}
          <div>
            <input type="checkbox" name="categories" value="{{id}}">
            <label for="huey">{{category}}</label>
          </div>
          {{/categories}}
          <input type="text" name="title"><br>
          <textarea name="body" rows="8" cols="40"></textarea><br>
          <button>Update Post</button>
        </form>
        <form action="/acct/deletePost" method="post">
          <input type="hidden" name="post_id" value="{{id}}">
          <button>Delete Post</button>
        </form>
        <form action="/post" method="get">
          <input type="hidden" name="post_id" value="{{id}}">
          <button>Post Page</button>
        </form>
        <form action="/acct/removePostImage" method="post">
          {{#postImage}}
          <input type="hidden" name="file_path" value="{{imageURL}}">
          {{/postImage}}
          <input type="hidden" name="post_id" value="{{id}}">
          <button>Delete Image</button>
        </form>
      </div>
      {{/userPosts}}
      {{^userPosts}}
    <p class="text-light no-content-message">You haven't published anything yet!</p>
      {{/userPosts}}
    </div>
    
    <div>
    <p class="text-light">Your favorites:</p>
      {{#favouritePosts}}
      <div>
        <h2>{{post.title}}</h2>
        <p>Comments: {{post.comment.length}}</p>
        <form action="/post" method="post">
          <input type="hidden" name="post_id" value="{{post.id}}">
          <button>Post Page</button>
        </form>
        <form action="/acct/removeFavourite" method="post">
          <input type="hidden" name="favourite_id" value="{{id}}">
          <button>Remove Favourite</button>
        </form>
      </div>
      {{/favouritePosts}}
      {{^favouritePosts}}
      <p class="text-light no-content-message">You don't have any favorites yet! Click on the heart at the end of an article to see it here.</p>
      {{/favouritePosts}}
    </div>

  </div>
</div>

{{>footer}}
